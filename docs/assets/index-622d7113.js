(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function a(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=a(e);fetch(e.href,s)}})();const l=document.getElementById("canvas"),r=l.getContext("2d"),i=16,y=l.width=window.innerWidth,u=l.height=window.innerHeight,x=Math.floor(y/i-1),p=Math.floor(u/i-1),m=100;class c{constructor(){this.x=Math.floor(Math.random()*x),this.y=Math.floor(Math.random()*p)}show(){r.fillStyle="red",r.fillRect(this.x*i,this.y*i,i-1,i-1)}}class w{constructor(){this.restart=!1,this.direction={x:0,y:0},document.onkeydown=async t=>{var a,n,e,s;~[87,38].indexOf(t.keyCode)&&((a=this.lastDirection)==null?void 0:a.y)!==1?this.direction={x:0,y:-1}:~[65,37].indexOf(t.keyCode)&&((n=this.lastDirection)==null?void 0:n.x)!==1?this.direction={x:-1,y:0}:~[83,40].indexOf(t.keyCode)&&((e=this.lastDirection)==null?void 0:e.y)!==-1?this.direction={x:0,y:1}:~[68,39].indexOf(t.keyCode)&&((s=this.lastDirection)==null?void 0:s.x)!==-1?this.direction={x:1,y:0}:t.keyCode===82&&(this.restart=!0)}}}const o=new w;class f{constructor(){this.body=[{x:Math.floor(Math.random()*x),y:Math.floor(Math.random()*p)}],this.head=this.body[0]}update(){this.body.unshift({x:this.head.x+o.direction.x,y:this.head.y+o.direction.y}),this.body.pop(),this.head=this.body[0],this.tail=this.body[this.body.length-1]}eat(){this.body.push({x:this.tail.x,y:this.tail.y})}show(){r.fillStyle="#0f0";for(let t of this.body)r.fillRect(t.x*i,t.y*i,i-1,i-1)}}class g{constructor(){this.snake=new f,this.food=new c}start(){setInterval(()=>{this.update(),this.show()},m)}restart(){this.snake=new f,this.food=new c,o.direction={x:0,y:0},o.lastDirection={x:0,y:0}}update(){o.restart&&(o.restart=!1,this.restart()),o.lastDirection=o.direction,this.snake.update(),this.snake.head.x===this.food.x&&this.snake.head.y===this.food.y&&(this.snake.eat(),this.food=new c);for(let t=4;t<this.snake.body.length;t++)this.snake.body[t].x===this.snake.head.x&&this.snake.body[t].y===this.snake.head.y&&(console.log(this.snake.body[t],this.snake.head,t),this.restart())}show(){r.clearRect(0,0,y,u),this.food.show(),this.snake.show()}}const b=new g;b.start();
